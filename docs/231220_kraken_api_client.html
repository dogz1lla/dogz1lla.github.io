<!DOCTYPE html>
<html><head><title>Kraken cryptoexchange api with clojure</title><link href="resources/public/css/styles.css" rel="stylesheet" type="text/css"><link href="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/styles/github-dark.css" rel="stylesheet" type="text/css"><script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js" type="text/javascript"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/languages/clojure.min.js" type="text/javascript"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/languages/python.min.js" type="text/javascript"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/languages/bash.min.js" type="text/javascript"></script></head><body id="title-screen-body"><script>hljs.highlightAll();</script><div class="row"><div class="column left"><img class="avatar" src="resources/public/imgs/pixelz1lla.jpg"><p>Welcome to dogz1lla's lair</p><p><a href="http://github.com/dogz1lla">my github</a></p><p>If you find information on this website helpful/interesting/enjoyable consider donating!</p><p>(all donations are non-refundable!)</p><p> My monero (XMR) wallet:</p><img class="monero-qr" src="resources/public/imgs/website_address.png"></div><div class="column center"><div id="article-page"><div id="header-links">[ <a href="https://dogz1lla.github.io//index.html">Title page</a> | <a href="https://dogz1lla.github.io//home.html">List of articles</a> ]</div><h1>Kraken cryptoexchange api with clojure</h1><p><i>NOTE</i>: this article is an appendix text for  <a href="https://github.com/dogz1lla/clj-kraken">this repository</a>.</p><p>Cryptocurrencies (CC) have one advantage over traditional financial assets  (think shares, futures, options, etc.) in that it is much easier to &quot;algotrade&quot;  CC from the programmatic standpoint because biggest cryptoexchanges offer  modern APIs for us to feast upon.  It is usually a REST api that can serve web requests from the client  application.  <a href="https://www.kraken.com">Kraken</a> is one of the largest cryptoexchanges and  it also has an <a href="https://docs.kraken.com/rest/">api</a> that allows clients to  write algotrading software in any language.  I am a fan of clojure so i decided to write a little library that can connect  to Kraken, send requests to their api and parse the responses.</p><h2>Authenticating yourself on Kraken</h2><p>I quickly realized that the part that will take the most effort will be writing code that allows the client to authenticate itself on Kraken servers.  <a href="https://docs.kraken.com/rest/#section/Authentication">Official docs</a> provide  example code for several programming languages (no clojure though!) and one can see that there is quite a lot of encoding/byte manipulations of a string that involves private api key a &quot;nonce&quot; (unique increasing integer, can be set to  the current time in milliseconds) and the encoded payload that includes the  endpoint and all of the parameters of the request. The algorithm is not terribly complicated however i quickly realized that i  will have to use java security and cryptography related libraries which i wasnt really excited about because i have never worked with java before. </p><p>But hey! </p><p>It just means i have something new to learn (and clojure interop is pretty  straightforward to use)!</p><h2>Sending the request and parsing the results</h2><p>Kraken api has a bunch of endpoints varying from querying current server time  to downloading price data and submitting orders.  Each of the endpoints fall into one of the two categories: public and private. Public endpoints do not really require for the client to be authenticated  because they only return information that can be publicly available across all  accounts. Private endpoints allow one to work with information that is... well, private.  Think checking balance and order management.</p><p>I decided to set up the library such that only the &quot;Balance&quot; endpoint is  supported initially from the list of private endpoints but one could easily  enable other endpoints by adding them to the  <a href="https://github.com/dogz1lla/clj-kraken/blob/main/src/kraken_api/requests.clj#L16">set</a>  manually. On the other hand all public endpoints are enabled by default.</p><h2>Using the api client</h2><p>First of all for the library to work two environmental variables <i>KRAKEN_API_KEY</i>  and <i>KRAKEN_API_SEC</i> (for the api key and the api secret key respectively).</p><p>Then if one wishes to use the library with the custom algotrading code one must  hack around with the source code itself.  However to try it out i included a cli interface which can be run as follows:</p><pre><code class="bash">clj -M -m kraken-api.clj-kraken endpoint-name param1=value1 param2=value2 ...
</code></pre></div></div></div></body></html>